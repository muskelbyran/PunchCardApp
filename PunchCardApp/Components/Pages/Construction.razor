@page "/"

@* @layout EmptyLayout *@

<style>
	.button-row {
		display: flex;
		justify-content: center;
		gap: 1rem;
		margin-bottom: 1.5rem;
	}

	.logo {
		display: flex;
		justify-content: center;
		align-items: center;
		margin-bottom: 1rem;
	}

		.logo img {
			max-width: 300px;
			width: 100%;
			height: auto;
		}


	h5 {
		text-align: center;
		color: #333;
		margin-top: 1rem;
		margin-bottom: 1rem;
		font-size: 1.5rem;
	}

	p {
		text-align: center;
		font-size: 0.875rem;
	}

	hr {
		border-top: 1px solid #ddd;
		margin: 1.5rem 0;
	}

	.test {
		/* display: flex; */
	}
</style>

<div class="container">
	<div class="logo">
		<a href="/">
			<img src="/images/new-logo.png" alt="Muskelbyrån Logo" />
		</a>
	</div>
	<div class="button-row d-flex justify-content-center my-4 gap-3">
		<NavLink class="btn btn-primary btn-rounded" href="/signin">Logga in</NavLink>
		<NavLink class="btn btn-primary btn-rounded" href="/signup">Skapa konto</NavLink>
	</div>
	<hr />
	<div class="test">
		<h5><marquee>Examensarbete</marquee></h5>
		<br />
		<br />
		<p>* Det här är ett examensarbete i samarbete med Muskelbyrån. I webbappen finns ett backoffice för att hantera kunder och klippkort, men även en funktion för att skapa nyheter, events, workshops osv som sen läggs ut på hemsidan via ett API. Kunder ska kunna logga in och använda sina klippkort, uppdatera olika uppgifter. Fler funktioner tillkommer om det finns tid.</p>
		<br />
		<br />
		<p>* Alla uppgifter i databasen kommer att raderas 31/5 och hela projektet kommer att gå i produktion via Muskelbyråns webhotell. Det innebär att ditt konto kommer att försvinna och att de här länkarna kommer att sluta att fungera.</p>
		<br />
		<p>* Som testare uppskattas att du lämnar ärlig och konstruktiv feedback utifrån din upplevelse av att använda webappen. Feedback lämnas genom feedbackfunktionen under 'kontakt' länken.</p>
		<br />
		<br />
		<p>* Alternativt använd denna tillfälliga Discordserver <strong>https://discord.gg/FZKEpyNM</strong>. Den plockas ner när examensarbetet är klart.</p>
		<br />
		<br />
		<p>* Den här sidan / är en tillfällig sida så den behöver ingen feedback.</p>
		<br />
		<br />
		<p>* Jag är medveten om att röd är en varningsfärg, men beställaren vill väldigt gärna ha dessa färgerna. Tacksam om alla åstiker och förbättringsförslag om färger.</p>
		<br />
		<br />
		<p>* Den största buggen jag vet om just nu är att man blir utloggad efter kortare inaktivitet och att man då i vissa fall får Reconnecting to Server. Försöker åtgärda detta, men låg prioritet just nu.</p>
		<p>* Det är långt ifrån klart, det är fortfarande mycket buggar och fix med responsitivet. Mobilt läge är inte 100% i synk med desktop.</p>
		<br />
		<br />
		<div class="github">
			<h5>Github Changelog</h5>
			<br />
			<br />
			<ul id="commit-list"></ul>

			<script>
				const owner = "muskelbyran";
				const repo = "PunchCardApp";
				let page = 1;
				const perPage = 100;

				async function fetchCommits() {
					let commits = [];
					let moreData = true;

					while (moreData) {
						const response = await fetch(`https://api.github.com/repos/${owner}/${repo}/commits?per_page=${perPage}&page=${page}`);
						const data = await response.json();

					if (data.length > 0) {
						commits = commits.concat(data);
						page++;
					}	 
					else 
					{
						moreData = false;
					}
				}

				displayCommits(commits);
				}

				function displayCommits(commits) {
					const list = document.getElementById("commit-list");
				
					commits.forEach(commit => {
						const li = document.createElement("li");
						// li.innerHTML = `<a href="${commit.html_url}" target="_blank">${commit.commit.message}</a>`;
						li.textContent = `${commit.commit.message} – ${new Date(commit.commit.author.date).toLocaleString()}`;
						list.appendChild(li);
					});
				}

				fetchCommits();
			</script>

		</div>
		<br />
		<br />
		<div style="display: flex; justify-content: center;">
			<img src="/images/Resistance Is Futile.jpg" />
		</div>

	</div>

</div>